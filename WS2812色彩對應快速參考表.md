# WS2812 色彩對應快速參考表

## CPU Loading 色彩對應（修正後）

```
 0%  ━━━━━━━━━━━━━━━━━━━━━━━━━━ 50%  ━━━━━━━━━━━━━━ 84%  ━━━━ 100%
      🟢 綠色 (正常負載)              🟡 黃色 (中度)      🔴 紅色 (高)
      RGB: (0, 255, 0)              RGB: (255,255,0)   RGB: (255,0,0)
```

---

## 測試命令速查

| 命令 | CPU % | 預期顏色 | RGB 值 | 用途 |
|------|-------|---------|--------|------|
| `LOAD 0` | 0% | 🟢 綠色 | (0,255,0) | 最小值測試 |
| `LOAD 30` | 30% | 🟢 綠色 | (0,255,0) | 正常負載 |
| `LOAD 50` | 50% | 🟢 綠色 | (0,255,0) | 綠色上限 |
| `LOAD 51` | 51% | 🟡 黃色 | (255,255,0) | 黃色下限 |
| `LOAD 65` | 65% | 🟡 黃色 | (255,255,0) | 中度負載 |
| `LOAD 84` | 84% | 🟡 黃色 | (255,255,0) | 黃色上限 |
| `LOAD 85` | 85% | 🔴 紅色 | (255,0,0) | 紅色下限 |
| `LOAD 90` | 90% | 🔴 紅色 | (255,0,0) | 高負載 |
| `LOAD 100` | 100% | 🔴 紅色 | (255,0,0) | 最大值測試 |

---

## 程式碼片段

### 色彩判斷邏輯（C++）
```cpp
if (cpuLoad <= 50) {
    color = strip.Color(0, 255, 0);      // 綠色：0-50%
} else if (cpuLoad <= 84) {
    color = strip.Color(255, 255, 0);    // 黃色：51-84%
} else {
    color = strip.Color(255, 0, 0);      // 紅色：85-100%
}
```

### Python 測試腳本片段
```python
import serial
ser = serial.Serial('COM5', 9600)
ser.write(b'LOAD 65\n')
response = ser.readline().decode().strip()  # 應收到 "ACK"
```

### VB.NET 範例
```vbnet
Dim cpuPercent As Integer = 65
Dim command As String = $"LOAD {cpuPercent}{vbLf}"
SerialPort1.Write(command)
Dim response As String = SerialPort1.ReadLine()  ' 應收到 "ACK"
```

---

## 常見問題

### Q1: 為什麼從四段改成三段？
**A**: 遵循工業標準的「綠-黃-紅」三色警示系統，與 Arduino_WS2812_Integration_Guide.md 規範一致。

### Q2: 橙色為什麼被移除？
**A**: 整合指南只定義了綠色、黃色、紅色三種狀態，橙色是自訂的中間色，與標準不符。

### Q3: 邊界值如何判斷？
**A**: 
- 50% → 綠色 (使用 `<=`)
- 51% → 黃色 (使用 `<= 84`)
- 85% → 紅色 (else)

### Q4: 如果 PC 端傳送的值超過 100 會怎樣？
**A**: 程式會視為紅色顯示（因為 > 84），建議 PC 端限制輸入範圍在 0-100。

### Q5: 可以自訂顏色嗎?
**A**: 技術上可以，但不建議在競賽中修改，應遵守規格文件的規定。

---

## 硬體接線圖（ASCII）

```
    Arduino UNO               WS2812 Strip (8 LEDs)
    ┌─────────┐               ┌──────────────────┐
    │         │               │  1  2  3  4  5  6│
    │     D5  ├───────────────┤→ DIN            │
    │         │               │                  │
    │     5V  ├───────────────┤ VCC (Red Wire)  │
    │         │               │                  │
    │    GND  ├───────────────┤ GND (Black Wire)│
    │         │               └──────────────────┘
    └─────────┘
                                  7  8
```

---

## 修正前後對照

| CPU % | 修正前 | 修正後 | 變化 |
|-------|-------|-------|------|
| 0-24 | 🟢 綠 | 🟢 綠 | 無變化 |
| 25-49 | 🟡 黃 | 🟢 綠 | **改為綠色** |
| 50 | 🟠 橙 | 🟢 綠 | **改為綠色** |
| 51-74 | 🟠 橙 | 🟡 黃 | **改為黃色** |
| 75-84 | 🔴 紅 | 🟡 黃 | **改為黃色** |
| 85-100 | 🔴 紅 | 🔴 紅 | 無變化 |

**關鍵變化**：綠色範圍擴大（0-50%），黃色範圍從 25% 延後到 51%，紅色警示從 75% 延後到 85%。

---

## 檔案清單

### 韌體程式
- `src/main.cpp` - Arduino 韌體主程式（已修正）

### 測試工具
- `test_ws2812_colors.py` - Python 自動化測試腳本

### 說明文件
- `WS2812色彩閾值修正說明.md` - 詳細修正說明
- `WS2812實作驗證報告.md` - 完整驗證報告
- `WS2812色彩對應快速參考表.md` - 本檔案（快速參考）

### 規格文件
- `FirmwareSpec.md` - 韌體功能規格
- `Arduino_WS2812_Integration_Guide.md` - WS2812 整合指南
- `藍牙連線測試說明.md` - 藍牙測試文件

---

## 快速測試步驟

1. **上傳韌體**
   ```
   Arduino IDE → 上傳 → 等待完成
   ```

2. **開啟序列埠監視器**
   ```
   Baud Rate: 9600
   Line Ending: Newline
   ```

3. **執行測試命令**
   ```
   LOAD 30  → 觀察綠色
   LOAD 65  → 觀察黃色
   LOAD 90  → 觀察紅色
   ```

4. **確認回應**
   ```
   每次命令後應收到 "ACK"
   ```

5. **清除 LED**
   ```
   DISCONNECT
   ```

---

**最後更新**：2025-01-XX  
**韌體版本**：v1.0 (色彩閾值已修正)  
**相容性**：Arduino UNO, WS2812B x 8, HC-05
